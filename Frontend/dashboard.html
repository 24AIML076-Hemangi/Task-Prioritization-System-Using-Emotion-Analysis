<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Task Prioritize Using Emotion Analysis</title>
    <link rel="stylesheet" href="dashboard-style.css">
</head>
<body>
    <!-- Top Navigation -->
    <header class="navbar">
        <div class="navbar-content">
            <div class="navbar-brand">
                <div class="logo">TP</div>
                <h1>TaskPrioritize</h1>
            </div>

            <div class="navbar-actions">
                <button class="btn-emotion-scan" id="emotionScanBtn" title="Scan your emotion">
                    üì∑
                </button>
                <span class="user-name" id="userInfo">User</span>
                <button class="btn-logout" id="logoutBtn" title="Logout">
                    ‚éã
                </button>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- LEFT SIDEBAR - Navigation & Filters -->
        <aside class="sidebar-left" id="sidebarLeft">
            <nav class="nav-menu">
                <h3 class="nav-section-title">Views</h3>
                <button class="nav-item active" data-filter="today">
                    <span class="icon">üìÖ</span> Today
                </button>
                <button class="nav-item" data-filter="next7days">
                    <span class="icon">üìÜ</span> Next 7 Days
                </button>
                <button class="nav-item" data-filter="inbox">
                    <span class="icon">üì¨</span> Inbox
                </button>

                <h3 class="nav-section-title" style="margin-top: 20px;">Lists</h3>
                <button class="nav-item" data-filter="list-work">
                    <span class="icon">üíº</span> Work
                </button>
                <button class="nav-item" data-filter="list-study">
                    <span class="icon">üìö</span> Study
                </button>
                <button class="nav-item" data-filter="list-personal">
                    <span class="icon">‚ú®</span> Personal
                </button>

                <h3 class="nav-section-title" style="margin-top: 20px;">Filters</h3>
                <button class="nav-item" data-filter="important">
                    <span class="icon">‚≠ê</span> Important
                </button>
                <button class="nav-item" data-filter="urgent">
                    <span class="icon">üö®</span> Urgent
                </button>
                <button class="nav-item" data-filter="completed">
                    <span class="icon">‚úÖ</span> Completed
                </button>
            </nav>
        </aside>

        <!-- CENTER PANEL - Main Task List (PRIMARY) -->
        <main class="main-content" id="mainContent">
            <!-- Quick Add Task -->
            <section class="task-adder">
                <input
                    type="text"
                    id="taskInput"
                    class="task-input"
                    placeholder="Add a task... (press Enter)"
                    autocomplete="off"
                />
            </section>

            <!-- Current View Label -->
            <div class="view-header">
                <h2 id="viewTitle">Today</h2>
                <span class="task-count" id="taskCount">0 tasks</span>
            </div>

            <!-- Emotion Status Badge (if emotion scan active) -->
            <div class="emotion-badge" id="emotionBadge" style="display: none;">
                <span id="emotionIcon"></span>
                <span id="emotionLabel"></span>
                <button class="badge-close" id="clearEmotionBtn">√ó</button>
            </div>

            <!-- Task List - Grouped by Date -->
            <section class="tasks-list">
                <div id="tasksList">
                    <div class="empty-state">
                        <p>üìã No tasks. Add one to get started!</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- RIGHT PANEL - Calendar & Task Details (SECONDARY / Toggle) -->
        <aside class="sidebar-right" id="sidebarRight">
            <div class="right-panel-header">
                <button class="btn-icon" id="closeRightPanel" title="Close">√ó</button>
            </div>

            <!-- Calendar Widget -->
            <div class="calendar-widget">
                <h3>Calendar</h3>
                <div id="miniCalendar" class="mini-calendar">
                    <!-- Generated by JS -->
                </div>
                <div class="calendar-nav">
                    <button id="prevMonth" class="cal-btn">‚Äπ</button>
                    <span class="cal-month-year" id="monthYear"></span>
                    <button id="nextMonth" class="cal-btn">‚Ä∫</button>
                </div>
                <button class="btn-clear-filter" id="clearDateFilter">Clear Filter</button>
            </div>

            <!-- Task Details (shown when task is selected) -->
            <div class="task-details-panel" id="taskDetailsPanel" style="display: none;">
                <h3>Task Details</h3>
                <div id="taskDetailsContent">
                    <!-- Populated by JS -->
                </div>
            </div>
        </aside>
    </div>

    <!-- EMOTION SCAN - Camera Modal -->
    <div class="modal-overlay" id="modalOverlay"></div>

    <div class="modal" id="cameraModal">
        <div class="modal-header">
            <h2>Scan Emotion</h2>
            <button class="modal-close" id="closeCamera">√ó</button>
        </div>
        <div class="modal-body">
            <video id="videoFeed" class="video" playsinline></video>
            <canvas id="captureCanvas" style="display: none;"></canvas>
            <p class="status-text" id="cameraMessage">Initializing camera...</p>
        </div>
        <div class="modal-footer">
            <button class="btn-secondary" id="cancelCamera">Cancel</button>
            <button class="btn-primary" id="captureImage">Analyze</button>
        </div>
    </div>

    <!-- Emotion Result Modal -->
    <div class="modal" id="resultModal">
        <div class="modal-header">
            <h2>Emotion Analysis</h2>
            <button class="modal-close" id="closeResult">√ó</button>
        </div>
        <div class="modal-body emotion-result">
            <div class="emotion-icon-large" id="resultIcon"></div>
            <h3 id="resultEmotion"></h3>
            <p id="resultMessage"></p>
            <p class="confidence-text">Confidence: <span id="resultConfidence"></span>%</p>
        </div>
        <div class="modal-footer">
            <button class="btn-secondary" id="rejectEmotion">Dismiss</button>
            <button class="btn-primary" id="applyEmotion">Apply to Tasks</button>
        </div>
    </div>

    <script src="dashboard-script.js"></script>
</body>
</html>
