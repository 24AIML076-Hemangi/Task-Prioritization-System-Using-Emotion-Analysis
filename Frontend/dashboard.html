<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Task Prioritize Using Emotion Analysis</title>
    <link rel="stylesheet" href="dashboard-new-style.css">
</head>
<body>
    <!-- Top Navigation -->
    <header class="navbar">
        <div class="navbar-content">
            <div class="navbar-brand">
                <div class="logo">TP</div>
                <h1>TaskPrioritize</h1>
            </div>

            <div class="navbar-actions">
                <button class="toggle-calendar-btn" id="toggleCalendarBtn" title="Show/hide calendar">
                    ðŸ“…
                </button>
                <span class="user-name" id="userInfo">User</span>
                <button class="btn-logout" id="logoutBtn" title="Logout">
                    âŽ‹
                </button>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Sidebar Calendar (Collapsible) -->
        <aside class="sidebar" id="sidebar">
            <div class="calendar-widget">
                <h3>Calendar</h3>
                <div id="miniCalendar" class="mini-calendar">
                    <!-- Generated by JS -->
                </div>
                <div class="calendar-nav">
                    <button id="prevMonth" class="cal-btn">â€¹</button>
                    <button id="nextMonth" class="cal-btn">â€º</button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main">
            <!-- Quick Add Task -->
            <section class="task-adder">
                <input
                    type="text"
                    id="taskInput"
                    class="task-input"
                    placeholder="Add a task... (press Enter)"
                    autocomplete="off"
                />
            </section>

            <!-- Emotion Status (Minimal) -->
            <div class="emotion-badge" id="emotionBadge" style="display: none;">
                <span id="emotionIcon"></span>
                <span id="emotionLabel"></span>
                <button class="badge-close" id="clearEmotionBtn">Ã—</button>
            </div>

            <!-- Task List -->
            <section class="tasks-list">
                <div class="list-header">
                    <h2>My Tasks</h2>
                    <span class="task-count" id="taskCount">0</span>
                </div>

                <div class="tasks" id="tasksList">
                    <div class="empty-state">
                        <p>ðŸ“‹ No tasks. Add one to get started!</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Floating Action Button - Scan Emotion -->
    <button class="fab" id="emotionScanBtn" title="Scan your emotion">
        ðŸ“· Scan me
    </button>

    <!-- Camera Modal -->
    <div class="modal-overlay" id="modalOverlay"></div>

    <div class="modal" id="cameraModal">
        <div class="modal-header">
            <h2>Scan me</h2>
            <button class="modal-close" id="closeCamera">Ã—</button>
        </div>
        <div class="modal-body">
            <video id="videoFeed" class="video" playsinline></video>
            <canvas id="captureCanvas" style="display: none;"></canvas>
            <p class="status-text" id="cameraMessage">Ready to scan. Click "Scan me" when ready.</p>
        </div>
        <div class="modal-footer">
            <button class="btn-secondary" id="cancelCamera">Cancel</button>
            <button class="btn-primary" id="captureImage">Scan me</button>
        </div>
    </div>

    <!-- Result Modal -->
    <div class="modal" id="resultModal">
        <div class="modal-header">
            <h2>Analysis</h2>
            <button class="modal-close" id="closeResult">Ã—</button>
        </div>
        <div class="modal-body emotion-result">
            <div class="emotion-icon-large" id="resultIcon"></div>
            <h3 id="resultEmotion"></h3>
            <p id="resultMessage"></p>
            <p class="confidence-text">Confidence: <span id="resultConfidence"></span>%</p>
        </div>
        <div class="modal-footer">
            <button class="btn-primary" id="closeResultBtn">Got it</button>
        </div>
    </div>

    <script src="dashboard-new-script.js" defer></script>
</body>
</html>
